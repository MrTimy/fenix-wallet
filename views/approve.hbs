{{!< main }}

{{#if successMsg}}
  <p class="success-message">{{successMsg}}</p>
{{/if}}

<div class="wallet-activity-wrapper">
  <h4 style="color: #333; margin-top: 6px">Pending Transfer Approvals</h4>
  <div class="card">
    <table class="table table-striped table-bordered">
      <thead>
        <tr>
          <th scope="col">Date</th>
          <th scope="col">From</th>
          <th scope="col">To</th>
          <th scope="col">Amount</th>
          <th scope="col">Approve</th>
        </tr>
      </thead>
      <tbody>
        {{#each transfers}}
          <tr>
            <form action="/admin/approve" method="post" class="approval-form">
              <td style="width: 25%"><input
                  type="text"
                  readonly
                  class="form-control-plaintext"
                  id="date"
                  value="{{this.createdAt}}"
                /></td>
              <td style="width: 20%"><input
                  type="text"
                  readonly
                  class="form-control-plaintext"
                  id="from"
                  value="{{this.from}}"
                /></td>
              <td style="width: 20%"><input
                  type="text"
                  readonly
                  class="form-control-plaintext"
                  id="to"
                  value="{{this.to}}"
                /></td>
              <td style="width: 20%"><input
                  type="text"
                  readonly
                  class="form-control-plaintext"
                  id="amount"
                  value="₦{{this.amount}}"
                /></td>
              <input
                style="display: hidden"
                type="hidden"
                readonly
                class="form-control-plaintext"
                id="_id"
                value="₦{{this._id}}"
              />
              <td style="width: 15%"><button
                  type="submit"
                  class="btn btn-primary"
                >Approve</button></td>
            </form>
          </tr>
        {{/each}}
      </tbody>
    </table>
  </div>
</div>

<script>
  // Get all the approval forms const approvalForms =
  document.querySelectorAll('.approval-form'); // Add event listener to each
  form approvalForms.forEach(form => { form.addEventListener('submit', event =>
  { // Prevent the form from submitting immediately event.preventDefault(); //
  Show a confirmation prompt const shouldApprove = confirm('Do you want to
  approve this transfer?'); // Proceed with form submission if confirmed if
  (shouldApprove) { form.submit(); } }); });
</script>